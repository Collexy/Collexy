<div ng-controller="TemplateTreeCtrlEdit">
    <form role="form" ng-submit="submit()">
        <h4>Edit</h4>

        <input type="text" ng-model="node.name">

        <ul class="admin-tabs">
            <li ng-class="(currentTab=='template') ? 'active' : ''"><a href="#template" ng-click="toggleTab('template')">Template</a></li>
            <li ng-class="(currentTab=='properties') ? 'active' : ''"><a href="#properties" ng-click="toggleTab('properties')">Properties</a></li>
            <!-- <li ng-repeat="tab in node.ct.tabs  | unique: 'name'" ng-class="(currentTab==tab.name) ? 'active' : ''"><a href="#{{tab.name}}" ng-click="toggleTab(tab.name)">{{tab.name}}</a></li> -->
        </ul>
        <div ng-show="currentTab == 'template'">
            <table>
                <tr>
                    <td>
                        Template file HTML<br>
                        <small>Edit the template file HTML</small>
                    </td>
                    <!-- <td><textarea ng-model="node.html"></textarea></td> -->
                    <td style="width:70%;"><div ui-codemirror ui-codemirror-opts="editorOptions" ng-model="node.html"></div></td>
                    <style>
                        .CodeMirror { 
                            height: 600px;
                            border: 1px solid #ddd;
                        }
                    </style>
                </tr>
            </table>
        </div>
        <div ng-show="currentTab == 'properties'">
            <table>
                <tr>
                    <td>Alias</td>
                    <td><input type="text" ng-model="node.alias"></td>
                    <td>Overrides node title if entered bla bla bla</td>
                </tr>
                <tr>
                    <td>Parent Template</td>
                    <td>
                        <select ng-model="node.parent_template_node_id" ng-options="t.node_id as aliasOrNodeName(t.alias,t.node.name) for t in allTemplates">
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>Included templates</td>
                    <td>
                    {{node.partial_template_node_ids}}
                        <select ng-model="node.partial_template_node_ids" multiple ng-multiple="true" ng-options="tpl.node_id as aliasOrNodeName(tpl.alias,tpl.node.name) for tpl in allTemplates">
                            <!-- <option ng-repeat="tpl in allTemplates" ng-selected="isSelected(node.partial_template_node_ids, tpl.node_id)" value="{{tpl.node_id}}">{{aliasOrNodeName(tpl.alias,tpl.node.name)}}</option> -->
                            <!-- <option value="sidebar-2">Sidebar 2</option>
                            <option value="sidebar-3">Sidebar 3</option>
                            <option value="sidebar-4">Sidebar 4</option> -->
                        </select>
                    </td>
                </tr>
                <!-- <tr>
                    <td>Template file</td>
                    <td>
                        <select ng-model="node.dt.Path" ng-change="readFile()">
                            <option>New template file ({{node.node.name.toLowerCase()}}.tmpl)</option>
                            <option ng-repeat="tpl in node.tmpl" value="{{tpl.Path}}">{{tpl.Path}}</option>
                        </select>
                    </td>
                    <td>Overrides node title if entered bla bla bla</td>
                </tr> -->
            </table>
        </div>
        <div ui-view></div>
        <button class="btn" type="submit">Update Template &raquo;</button>
    </form>
</div>